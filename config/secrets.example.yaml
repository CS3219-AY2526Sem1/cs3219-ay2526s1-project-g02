# Secrets Configuration Template
#
# IMPORTANT: This is a TEMPLATE file showing the structure of secrets.
# DO NOT commit actual secrets to version control!
#
# Usage:
#   1. Copy this file to secrets.yaml: cp secrets.example.yaml secrets.yaml
#   2. Fill in your actual secret values in secrets.yaml
#   3. Ensure secrets.yaml is in .gitignore
#   4. Use environment-specific files: secrets-dev.yaml, secrets-prod.yaml, etc.
#
# Security Notes:
#   - Never commit secrets.yaml to git
#   - Use Google Secret Manager or similar for production
#   - Rotate secrets regularly
#   - Use different secrets for each environment
#   - Limit access to secrets files using file permissions

# ============================================================================
# SUPABASE CONFIGURATION
# ============================================================================
supabase:
  # Supabase project URL
  # Example: https://xxxxxxxxxxxx.supabase.co
  url: "REPLACE_WITH_YOUR_SUPABASE_URL"

  # Supabase anonymous/public key
  # This is safe to expose in client applications
  # Example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
  anon_key: "REPLACE_WITH_YOUR_SUPABASE_ANON_KEY"

  # Supabase service role key (SENSITIVE)
  # This key has full access to your database
  # NEVER expose this in client applications
  # Example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
  service_role_key: "REPLACE_WITH_YOUR_SUPABASE_SERVICE_ROLE_KEY"

  # Database connection string (optional, for direct database access)
  # Example: postgresql://postgres:password@db.xxxxxxxxxxxx.supabase.co:5432/postgres
  database_url: "REPLACE_WITH_YOUR_SUPABASE_DB_URL"

  # JWT secret for token verification
  jwt_secret: "REPLACE_WITH_YOUR_SUPABASE_JWT_SECRET"

# ============================================================================
# GOOGLE CLOUD PLATFORM SECRETS
# ============================================================================
gcp:
  # GCP Project ID
  project_id: "noclue-476404"

  # Service account key for CI/CD (GitHub Actions)
  # This should be the JSON key file content as a string
  # Get this from: gcloud iam service-accounts keys create
  service_account_key: "REPLACE_WITH_GCP_SERVICE_ACCOUNT_KEY_JSON"

  # Artifact Registry configuration
  artifact_registry:
    location: "us-central1"
    repository: "noclue-docker"

  # GKE cluster credentials
  gke:
    cluster_name: "noclue-cluster"
    region: "us-central1"
    zone: "us-central1-a"

# ============================================================================
# APPLICATION SECRETS
# ============================================================================
application:
  # JWT secret for application authentication
  # Generate with: openssl rand -base64 32
  jwt_secret: "REPLACE_WITH_RANDOM_JWT_SECRET"

  # Session secret for Express sessions
  # Generate with: openssl rand -base64 32
  session_secret: "REPLACE_WITH_RANDOM_SESSION_SECRET"

  # API keys for external services
  api_keys:
    # OpenAI API key (if using AI features)
    openai: "REPLACE_WITH_OPENAI_API_KEY"

    # SendGrid API key (if using email)
    sendgrid: "REPLACE_WITH_SENDGRID_API_KEY"

  # OAuth credentials (if using OAuth)
  oauth:
    google:
      client_id: "REPLACE_WITH_GOOGLE_CLIENT_ID"
      client_secret: "REPLACE_WITH_GOOGLE_CLIENT_SECRET"

    github:
      client_id: "REPLACE_WITH_GITHUB_CLIENT_ID"
      client_secret: "REPLACE_WITH_GITHUB_CLIENT_SECRET"

# ============================================================================
# KAFKA/MESSAGE QUEUE SECRETS (if applicable)
# ============================================================================
kafka:
  # Kafka broker URLs
  brokers:
    - "kafka-0.kafka-headless.default.svc.cluster.local:9092"

  # SASL authentication (if enabled)
  sasl:
    username: "REPLACE_WITH_KAFKA_USERNAME"
    password: "REPLACE_WITH_KAFKA_PASSWORD"

  # SSL/TLS configuration
  ssl:
    enabled: false
    ca_cert: "REPLACE_WITH_CA_CERTIFICATE"
    client_cert: "REPLACE_WITH_CLIENT_CERTIFICATE"
    client_key: "REPLACE_WITH_CLIENT_KEY"

# ============================================================================
# REDIS SECRETS (if using Redis for caching)
# ============================================================================
redis:
  # Redis connection URL
  # Example: redis://default:password@redis-host:6379
  url: "REPLACE_WITH_REDIS_URL"

  # Redis password
  password: "REPLACE_WITH_REDIS_PASSWORD"

  # Redis host and port
  host: "redis.default.svc.cluster.local"
  port: 6379

# ============================================================================
# MONITORING AND OBSERVABILITY
# ============================================================================
monitoring:
  # Sentry DSN for error tracking
  sentry_dsn: "REPLACE_WITH_SENTRY_DSN"

  # DataDog API key (if using DataDog)
  datadog_api_key: "REPLACE_WITH_DATADOG_API_KEY"

  # New Relic license key (if using New Relic)
  newrelic_license_key: "REPLACE_WITH_NEWRELIC_LICENSE_KEY"

# ============================================================================
# ENVIRONMENT-SPECIFIC SETTINGS
# ============================================================================
environment:
  # Environment name: development, staging, production
  name: "development"

  # Enable debug mode
  debug: true

  # Log level: debug, info, warn, error
  log_level: "debug"

# ============================================================================
# GITHUB SECRETS (for CI/CD)
# ============================================================================
# These secrets should be added to GitHub repository settings
# Settings > Secrets and variables > Actions
#
# Required GitHub Secrets:
#   - GCP_PROJECT_ID: noclue-476404
#   - GCP_SA_KEY: <service-account-json-key>
#   - SUPABASE_URL: <your-supabase-url>
#   - SUPABASE_ANON_KEY: <your-supabase-anon-key>
#   - SUPABASE_SERVICE_ROLE_KEY: <your-supabase-service-role-key>
#   - JWT_SECRET: <your-jwt-secret>
#   - SESSION_SECRET: <your-session-secret>

# ============================================================================
# KUBERNETES SECRET CREATION COMMANDS
# ============================================================================
# Use these commands to create Kubernetes secrets from this file:
#
# Create generic secret from file:
#   kubectl create secret generic app-secrets \
#     --from-file=secrets.yaml \
#     --namespace=noclue-app
#
# Create secret from literal values:
#   kubectl create secret generic supabase-secrets \
#     --from-literal=url="YOUR_URL" \
#     --from-literal=anon-key="YOUR_KEY" \
#     --from-literal=service-role-key="YOUR_KEY" \
#     --namespace=noclue-app
#
# Create Docker registry secret:
#   kubectl create secret docker-registry gcr-json-key \
#     --docker-server=us-central1-docker.pkg.dev \
#     --docker-username=_json_key \
#     --docker-password="$(cat service-account-key.json)" \
#     --docker-email=your-email@example.com \
#     --namespace=noclue-app

# ============================================================================
# GOOGLE SECRET MANAGER INTEGRATION
# ============================================================================
# For production, use Google Secret Manager instead of files:
#
# 1. Create secrets in Secret Manager:
#    gcloud secrets create supabase-url \
#      --data-file=- <<< "YOUR_SUPABASE_URL"
#
# 2. Grant access to service account:
#    gcloud secrets add-iam-policy-binding supabase-url \
#      --member="serviceAccount:noclue-cluster-sa@noclue-476404.iam.gserviceaccount.com" \
#      --role="roles/secretmanager.secretAccessor"
#
# 3. Access in Kubernetes using Workload Identity:
#    See: https://cloud.google.com/secret-manager/docs/using-secret-manager

# ============================================================================
# SECRET ROTATION SCHEDULE
# ============================================================================
# Recommended rotation schedule:
#   - JWT secrets: Every 90 days
#   - API keys: Every 90 days
#   - Database credentials: Every 90 days
#   - Service account keys: Every 90 days
#   - OAuth secrets: When compromised or annually
#
# Set calendar reminders to rotate secrets regularly

# ============================================================================
# VALIDATION CHECKLIST
# ============================================================================
# Before deploying, verify:
#   [ ] All REPLACE_WITH_* values have been replaced
#   [ ] Secrets are strong and randomly generated
#   [ ] secrets.yaml is in .gitignore
#   [ ] File permissions are set correctly (chmod 600 secrets.yaml)
#   [ ] Different secrets are used for dev/staging/prod
#   [ ] Secrets are backed up securely
#   [ ] Team members with access are documented
#   [ ] Secrets have been tested in a safe environment
